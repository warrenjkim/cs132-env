#!/bin/bash

CONTAINER_NAME=cs132-env
CMD=$(echo $1 | tr '[:upper:]' '[:lower:]')
HW=$2
BIN_DIR="$(dirname "${BASH_SOURCE[0]}")"

echo "$BIN_DIR/docker"

if [[ "$CMD" == "start" ]]; then
    $(cd "$BIN_DIR/docker" && docker compose up -d)
    exit
fi

if [[ "$CMD" == "stop" ]]; then
    $(cd "$BIN_DIR/docker" && docker compose down -v -t 0)
    exit
fi

docker compose exec $CONTAINER_NAME bash -c "gradle --version"
echo
docker compose exec $CONTAINER_NAME bash -c "cd ./${HW} && gradle ${CMD}"
